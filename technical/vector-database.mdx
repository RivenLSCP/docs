---
title: 'Vector Database'
description: 'High-performance vector database integrated with SUI and Walrus for AI applications'
---

## Overview
Our vector database layer integrates a ChromaDB-based system off-chain with the SUI blockchain and Walrus decentralized storage. This architecture provides trust and verifiability on-chain while ensuring high-performance similarity search and vector indexing off-chain. By separating concerns, you gain the scalability and speed of a dedicated vector database, the immutability and governance of SUI, and the decentralized reliability of Walrus.

**Key Highlights:**

- **Off-chain Vector Indexing:** Leverage ChromaDB or similar solutions for efficient vector similarity search.
- **On-chain References:** Store collection metadata, replication factors, and index settings on SUI.
- **Decentralized Storage (Walrus):** Store embeddings and related metadata off-chain, referenced by CIDs on SUI.
- **Performance & Scalability:** Achieve sub-second queries and efficient indexing with off-chain infrastructure, while maintaining a verifiable record of configuration on-chain.

## Key Features

<CardGroup cols={2}>
  <Card title="Performance" icon="bolt">
    - • Sub-second query times (off-chain)
    - • Efficient indexing with ChromaDB
    - • Automatic optimization strategies
    - • Off-chain caches and pre-built indexes
  </Card>
  <Card title="Scalability" icon="arrow-up-right-dots">
    - • Horizontal scaling by adding more off-chain nodes
    - • Automatic sharding and load balancing off-chain
    - • Dynamic resource allocation controlled off-chain
    - • On-chain references ensure consistent indexing info
  </Card>
  <Card title="Reliability" icon="shield-check">
    - • Data replication policies recorded on SUI
    - • Automatic failover via off-chain cluster management
    - • Consistency checks anchored on-chain
    - • Backup/restore references managed in SUI and Walru
  </Card>
  <Card title="Integration" icon="puzzle-piece">
    - • Multiple client SDKs for off-chain queries
    - • REST API for direct off-chain access
    - • Streaming support & batch operations off-chain
    - • On-chain updates to configuration and permissions
  </Card>
</CardGroup>

## Getting Started
### Installation
Install the off-chain SDK that integrates with SUI and Walrus references. You will interact with SUI smart contracts for registration and configuration, and off-chain services for actual embedding operations:

<CodeGroup>
```bash npm
npm install @sera/vector-db
```

```bash pip
pip install sera-vector
```

```bash go
go get github.com/sera-xyz/vector-db
```
</CodeGroup>

### Basic Usage (Off-Chain Client)

```python
from sera.vector import VectorDB

# Connect to the off-chain VectorDB cluster using references from SUI
db = VectorDB.connect(
    sui_package_id="0x...package_id",
    walrus_gateway="https://walrus-gateway.example.com",
    cluster="production"
)

# Create collection (metadata recorded on SUI, embeddings off-chain)
collection = db.create_collection(
    name="embeddings",
    dimension=768
)

# Add vectors (vectors stored in Walrus, references updated on SUI)
collection.add(
    vectors=embeddings,
    metadata=metadata,
    ids=unique_ids
)

# Query (off-chain operation, results verified against on-chain settings)
results = collection.query(
    vector=query_vector,
    top_k=10
)
```

## Advanced Features

### Collection Management
Use SUI transactions to store collection configuration (like dimension, metric, replication) and Walrus to store actual embedding data. Off-chain code ensures the indexes and configurations are applied consistently:
<AccordionGroup>
  <Accordion title="Creation Options">
    ```python
    collection = db.create_collection(
        name="my_collection",
        dimension=768,
        metric="cosine",  # or "euclidean", "dot"
        replicas=3,
        shards=5
    )
    ```
    This writes metadata to SUI and sets up the off-chain indexing accordingly.
  </Accordion>
  
  <Accordion title="Index Configuration">
    ```python
    collection.configure_index(
        index_type="hnsw",
        params={
            "M": 16,
            "ef_construction": 200,
            "ef": 50
        }
    )
    ```
    These configurations are stored on-chain as references so you can audit and verify them. The off-chain service respects these parameters.
  </Accordion>
</AccordionGroup>

### Query Operations
All queries run off-chain for performance, while the chain stores pointers and configuration that define how queries should be handled:

```python
# Complex query with filters
results = collection.query(
    vector=query_vector,
    filter={
        "category": {"$in": ["tech", "science"]},
        "confidence": {"$gt": 0.8}
    },
    top_k=10,
    include_metadata=True
)

# Batch query
results = collection.batch_query(
    vectors=query_vectors,
    top_k=5,
    batch_size=100
)

# Streaming query
async for result in collection.stream_query(query_vector):
    process_result(result)
```

## Performance Optimization

### Indexing Strategies

<Steps>
  1. **Choose Index Type**
     On-chain records which index type (e.g., HNSW) is used, while off-chain services build and maintain the index.

  2. **Configure Parameters**
     Tune index parameters off-chain but record them on-chain for auditing.

  3. **Monitor Performance**
     Gather query latency and resource usage off-chain. Store summary metrics on-chain for integrity.

  4. **Optimize**
     Adjust parameters based on off-chain monitoring and update SUI records accordingly.
</Steps>

### Caching

<CardGroup cols={2}>
  <Card title="Query Cache" icon="database">
    ```python
    collection.configure_cache(
        cache_size="10GB",
        ttl=3600
    )
    ```
    Off-chain caching improves response times. Cache settings can be recorded on-chain for transparency.
  </Card>
  <Card title="Result Cache" icon="bolt">
    ```python
    collection.enable_result_cache(
        max_size=1000,
        expire_after=300
    )
    ```
    Off-chain caching of frequent queries. On-chain references let you audit cache policies.
  </Card>
</CardGroup>

## Data Management

### Backup & Recovery
Backups occur off-chain (e.g., to cloud storage or Walrus snapshots). The backup ID and associated metadata can be recorded on SUI for verifiability:

```python
# Create backup off-chain and store reference on-chain
backup_id = db.create_backup(
    collections=["embeddings"],
    destination="walrus://backup-cid"
)

# Restore from backup (off-chain), referencing SUI records to ensure correct state
db.restore_backup(
    backup_id=backup_id,
    target_cluster="new-cluster"
)
```

### Replication

<CardGroup cols={2}>
  <Card title="Configure Replication" icon="copy">
    ```python
    collection.configure_replication(
        replicas=3,
        consistency="strong"
    )
    ```
    SUI tracks replication policies. Off-chain nodes replicate accordingly.
  </Card>
  <Card title="Monitor Status" icon="gauge">
    ```python
    status = collection.get_replication_status()
    print(f"Sync status: {status.state}")
    ```
    Results reflect off-chain cluster state, anchored by on-chain policy references.
  </Card>
</CardGroup>

## Monitoring & Analytics

### Performance Metrics

```python
from sera.vector.monitoring import Metrics

# Retrieve off-chain metrics and store summaries on-chain
metrics = Metrics.get_collection_metrics(
    collection_name="embeddings",
    time_range="1h"
)

# Setup alerts (off-chain) and record alert configurations on-chain
Metrics.create_alert(
    metric="query_latency",
    threshold=100,  # ms
    window="5m"
)
```

### Health Monitoring

<Frame>
  <img src="/images/vector-db-dashboard.png" alt="Vector DB Dashboard" />
</Frame>
Dashboards and health checks occur off-chain. Periodic integrity hashes of logs and metrics can be anchored to SUI.

## Security

### Access Control

Control who can read and write vector data via on-chain access controls. Off-chain nodes enforce these rules and only serve data to authorized parties:

```python
# Configure access on-chain, enforced off-chain
collection.configure_access(
    read=["role1", "role2"],
    write=["role1"],
    admin=["admin"]
)

# Audit logs can be hashed and recorded on SUI
logs = collection.get_audit_logs(
    start_time="2024-01-01",
    end_time="2024-01-31"
)
```

### Encryption

<CardGroup cols={2}>
  <Card title="At Rest" icon="lock">
    - • AES-256 encryption for Walrus-stored embeddings
    - • Key rotation and secure off-chain key management
    - • On-chain references to key policies
  </Card>
  <Card title="In Transit" icon="shield">
    - • TLS 1.3 for connections between clients and off-chain database nodes
    - • Certificate management off-chain, references on-chain for verification
    - • Secure channels ensured by off-chain gateway nodes
  </Card>
</CardGroup>

## Best Practices

### Performance Tips

<Check>Use appropriate batch sizes for off-chain operations</Check>
<Check>Configure proper index settings and record them on SUI</Check>
<Check>Enable caching for frequent queries off-chain</Check>
<Check>Monitor and optimize regularly</Check>
<Cross>Oversized unpartitioned collections without proper indexing</Cross>
<Cross>Unoptimized queries that ignore recorded best practices</Cross>

### Reliability Guidelines

<Steps>
  1. **Regular Backups**
     Schedule automated off-chain backups, store backup references on SUI.

  2. **Monitoring**
     Use off-chain monitoring tools and store integrity hashes on SUI.

  3. **Capacity Planning**
     Plan scaling and resource allocation off-chain, record policies on-chain.

  4. **Disaster Recovery**
     Maintain documented recovery procedures off-chain, with on-chain references for authenticity.
</Steps>

## Support & Resources

<CardGroup cols={2}>
  <Card title="Documentation" icon="book">
    [API Reference](/api-reference)
  </Card>
  <Card title="Examples" icon="code">
    [Sample Code](https://github.com/sera-xyz/examples)
  </Card>
  <Card title="Community" icon="users">
    [Discord Community](https://discord.gg/datasphere)
  </Card>
  <Card title="Support" icon="headset">
    [Technical Support](mailto:support@sera.xyz)
  </Card>
</CardGroup>

<Note>
Need help optimizing your vector database implementation? Contact our solutions team at solutions@sera.xyz
</Note> 